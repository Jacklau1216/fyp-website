$(document).ready(function() {
    $("#detect-button").click(function() {
        var text = $("#text-input").val();
        $.ajax({
            url: "/detect",
            type: "POST",
            data: { text: text },
            success: function(response) {
                $("#result").text("Generated By AI: " + response);
            },
            error: function(xhr, status, error) {
                console.log(error);
            }
        });
    });
    // Update the label text when a file is selected
    $("#file-input").change(function() {
        var fileName = $(this).val().split('\\').pop();
        $(".custom-file-label").text(fileName);
    });
    $("#upload-button").click(function() {
        var fileInput = document.getElementById("file-input");
        var file = fileInput.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function(e) {
                var content = e.target.result;
                $.ajax({
                    url: "/upload",
                    type: "POST",
                    data: { content: content },
                    success: function(response) {
                        console.log("File uploaded successfully!");
                        $(".custom-file-label").text("Choose file");

                        $(".flash-message").html('<div class="alert alert-success alert-dismissible fade show" role="alert">File uploaded successfully!</div>');
                    },
                    error: function(xhr, status, error) {
                        console.log(error);
                    }
                });
            };
            reader.readAsText(file);
        }
    });
});